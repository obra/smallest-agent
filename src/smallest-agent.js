import e from"@anthropic-ai/sdk";import{execSync as t}from"child_process";let i=new e,n=[],c=(e,t)=>n.push({role:e,content:t}),r,o=process.stdout;o.write("> ");for await(r of process.stdin)for(c("user",r+"");;){let{content:e}=await i.messages.create({model:"claude-opus-4-6",max_tokens:4e3,messages:n,tools:[{name:"sh",input_schema:{type:"object",properties:{c:{}}}}]}),{input:u,id:d}=e.at(-1);if(c("assistant",e),!u){o.write(e[0].text+"\n> ");break}r=t(u.c+" 2>&1;:")+"",o.write(u.c+"\n"+r+"\n"),c("user",[{type:"tool_result",tool_use_id:d,content:r}])}
