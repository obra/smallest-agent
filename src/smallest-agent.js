import t from"@anthropic-ai/sdk";import{execSync as e}from"child_process";import{createInterface as o}from"readline";for(let i,r=new t,n=[],a=console.log,p=(t,e)=>n.push({role:t,content:e}),c=o({input:process.stdin,output:process.stdout});i=await new Promise((t=>c.question("> ",t)));)for(p("user",i);;){const{content:t}=await r.messages.create({model:"claude-opus-4-6",max_tokens:4e3,messages:n,tools:[{name:"bash",description:"sh",input_schema:{type:"object",properties:{cmd:{}}}}]}),o=t.find((t=>t.type>"text"));if(p("assistant",t),!o){a(t.find((t=>t.type<"tool"))?.text);break}a(o.input.cmd);try{var s=e(o.input.cmd)+""}catch(t){s=t.message}a(s),p("user",[{type:"tool_result",tool_use_id:o.id,content:s}])}
