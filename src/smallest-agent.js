import e from"@anthropic-ai/sdk";import{execSync as t}from"child_process";let s,o=new e,r=[],a=(e,t)=>r.push({role:e,content:t});for await(s of process.stdin)for(a("user",s+"");;){let{content:e}=await o.messages.create({model:"claude-opus-4-6",max_tokens:4e3,messages:r,tools:[{name:"sh",input_schema:{type:"object",properties:{c:{}}}}]}),s=e.at(-1);if(a("assistant",e),!s.id){process.stdout.write(s.text+"\n> ");break}a("user",[{type:"tool_result",tool_use_id:s.id,content:t(s.input.c+";:")+""}])}