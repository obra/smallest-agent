import e from"@anthropic-ai/sdk";import{execSync as t}from"child_process";import{createInterface as s}from"readline";for(let r,i=new e,n=[],a=console.log,c=(e,t)=>n.push({role:e,content:t}),m=s(process.stdin,process.stdout);r=await new Promise((e=>m.question("> ",e)));)for(c("user",r);;){const{content:e}=await i.messages.create({model:"claude-opus-4-6",max_tokens:4e3,messages:n,tools:[{name:"sh",input_schema:{type:"object",properties:{cmd:{}}}}]}),s=e.find((e=>e.input));if(c("assistant",e),!s){a(e[0]?.text);break}try{var o=t(s.input.cmd)+""}catch(e){o=e.message}a(s.input.cmd,o),c("user",[{type:"tool_result",tool_use_id:s.id,content:o}])}
