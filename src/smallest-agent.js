import e from"@anthropic-ai/sdk";import{execSync as t}from"child_process";let i=new e,n=[],a=console.log,c=(e,t)=>n.push({role:e,content:t}),d,r;process.stdout.write("> ");for await(r of process.stdin)for(c("user",r+"");;){const{content:e}=await i.messages.create({model:"claude-opus-4-6",max_tokens:4e3,messages:n,tools:[{name:"s",input_schema:{type:"object",properties:{c:{}}}}]}),s=e.at(-1);if(c("assistant",e),!s.input){a(e[0].text),process.stdout.write("\n> ");break}a(s.input.c+"\n"+(d=t(s.input.c+" 2>&1;:")+"")),c("user",[{type:"tool_result",tool_use_id:s.id,content:d}])}
